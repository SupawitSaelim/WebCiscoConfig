<!-- comport.html -->
<!DOCTYPE html>
<html>
<head>
    <title>COM Port Selector</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h2>Available COM Ports</h2>
    <select id="comport">
        <option value="">Select COM Port</option>
        {% for port in ports %}
            <option value="{{ port.device }}">
                {{ port.device }} - {{ port.description }}
            </option>
        {% endfor %}
    </select>
    <button onclick="connectPort()">Connect</button>
    <div id="status"></div>

    <script>
        function connectPort() {
            const port = document.getElementById('comport').value;
            if (!port) return;
            
            fetch(`/connect/${port}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('status').innerText = data.message;
                });
        }
    </script>
</body>
</html>